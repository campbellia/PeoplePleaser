(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{453:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(43),l=a(168),c=a.n(l),i=a(393),s=a(396),m=a(454),u=a(446),p=a(448),f=a(397),d=a(404),h=a(65),v=Object(f.a)((function(e){return{container:{marginTop:20},message:{fontSize:20},button:{width:300,height:100,fontSize:20},link:{textDecoration:"none",color:"#ffffff"}}})),E=function(e){var t=e.pollId,a=e.handleRestartPoll,n=v();return o.a.createElement(i.a,{className:n.container,maxWidth:"lg"},o.a.createElement(u.a,{container:!0,direction:"column",alignItems:"center",spacing:2},o.a.createElement(u.a,{item:!0},o.a.createElement(s.a,{className:n.message,align:"center",variant:"overline",color:"inherit"},"Voting has ended")),o.a.createElement(u.a,{item:!0},o.a.createElement(p.a,{className:n.button,size:"large",variant:"contained",color:"primary"},o.a.createElement(h.b,{className:n.link,to:"/polls/".concat(t,"/results")},"View Results"))),o.a.createElement(u.a,{item:!0},o.a.createElement(p.a,{className:n.button,size:"large",variant:"contained",color:"primary",onClick:a},"Restart Poll"))))};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,o=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=Object(f.a)((function(e){return{viewbutton:{fontWeight:"bold",textDecoration:"none",color:"#ffffff"},header:{marginTop:10}}}));t.default=function(e){var t=e.match,a=g(),l=b(Object(n.useState)({name:"",options:{},totalVotes:0,terminated:!1}),2),f=l[0],h=l[1],v={},y=Object.keys(f.options);y.forEach((function(e){v[e]=0}));var S=b(Object(n.useState)(v),2),w=S[0],O=S[1],j=b(Object(n.useState)(!1),2),R=j[0],I=j[1],V=function(){var e="/polls/".concat(t.params.pollId);c.a.get(e).then((function(e){h(e.data)})).catch((function(e){console.log("ERROR getting poll:",e)}))};Object(n.useEffect)((function(){V()}),[]);var k=function(e){e.preventDefault();var a={};a.options=w,a.terminated=!1,void 0!==a.options[""]&&delete a.options[""];var n="/polls/".concat(t.params.pollId);c.a.put(n,a).then((function(){var e="/polls/".concat(t.params.pollId,"/results");I(e)})).catch((function(e){console.log("ERR:",e)}))},N=function(){var e={};y.forEach((function(t){e[t]=[]}));var a={name:name,options:e,totalVotes:0,terminated:!1};c.a.put("/polls/".concat(t.params.pollId),a).then((function(){V()})).catch((function(e){console.log("ERR:",e)}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.Helmet,null,o.a.createElement("title",null,"Vote on A Shared Poll"),o.a.createElement("meta",{name:"description",content:"Someone has shared a group poll with you -- submit your preferences for each option, and let peoplepleaser reveal the optimal decision."})),f.terminated?o.a.createElement(E,{"data-testid":"poll",handleRestartPoll:N,pollId:t.params.pollId}):R?o.a.createElement(r.a,{to:R}):o.a.createElement(i.a,{"data-testid":"poll"},o.a.createElement(s.a,{className:a.header,align:"center",variant:"h4",component:"h4"},f.name),o.a.createElement("form",{onSubmit:k},y.map((function(e,t){return o.a.createElement("div",{className:"option",key:t},o.a.createElement("h4",null,e),o.a.createElement(m.a,{"data-testid":"changeVote",defaultValue:0,step:1,marks:!0,min:-5,max:5,onChange:function(t,a){!function(e,t){var a={};for(var n in f.options)a[n]=0;(a=Object.assign(a,w))[t]=e,O(a)}(a,e)},valueLabelDisplay:"on"}))})),o.a.createElement(u.a,{container:!0,justify:"space-between"},o.a.createElement(p.a,{className:"btn",variant:"contained",color:"primary"},"SHARE POLL"),o.a.createElement(p.a,{type:"submit",value:"Submit Votes",variant:"contained",color:"primary","aria-label":"submitVotes"},"SUBMIT VOTES")))))}}}]);